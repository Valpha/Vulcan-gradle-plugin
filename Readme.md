# Vulcan 平台化、渠道化打包插件

## 一、平台化建设简述

### 什么是平台化？

平台化是指将构建应用的源码统一化，整合成一套源码。通过不同的配置、构建命令，即可快速构建出不同平台的应用。

### 为什么要实现平台化？

1. 项目结构清晰明了，责任边界清晰，可维护性显著提升
2. 代码量显著减少，显著提高开发效率。将多平台的代码统一整合，最大化提高代码复用度，降低了低价值的模板代码以及无效的重复业务逻辑
3. 代码质量显著提升。
    1. 去除了无效的代码以及业务逻辑，避免“做多错多”
    2. 优化代码交付流程，一套代码可以交付多平台，减少代码交付时产生的额外流程，降低出错的概率
    3. 渠道化交付最大化复用业务逻辑，不涉及平台间的重复适配，避免适配引入的错误
4. 交付流程可定制，从传统的 app 独立交付蜕变为参数化构建，可实现 WebUI 一键打包等更多扩展功能

### 如何实现？

**模块化！**

任何大型项目都不可避免地面对「模块拆分」或「业务划分」等问题，其背后的原因是当项目成长到足够大后，其维护难度、复杂程度呈指数增长，直至个人的能力无法 cover 这些问题。
面对它的方法就是通过分治法，将项目拆分为多个模块，每个模块都对应一个功能，通过模块之间的依赖关系，实现功能之间的解耦合。
从单一脚本到多文件项目、从 MVC 到 MVI 、从「前后分离」到「洋葱架构」，每一步都是分治思想的体现。

而在 Android 开发领域，基于 gradle 构建体系而言，「模块化」就是解决方案。
具体而言，通过将项目拆分为多个模块，并按照「整洁架构」的思想，规划出「平台无关层」、「适配接口层」和「差异化实现层」。

1. 平台无关层：处于这一层的模块都是与底层平台无关的，即无论切换哪一个平台，这些代码都可以复用。它们遵循常见的 Android 设计模式，如 MVVM、MVI 等，一般作为上层 app 入口以及领域层 useCase 存在。
2. 适配接口层：处于这一层的模块也是平台无关的，它提供了一套平台能力接口，即无论哪一个平台，都应当能够提供这些相同的能力。
3. 差异化实现层：差异化实现层是处于最底层的模块，它与平台强关联。差异化实现层会实现适配层中所定义的接口，提供对应的能力。

## 二、Vulcan 插件概述
本插件[Vulcan](http://10.170.8.35:8077/DC/commonkit/Vulcan.git)面向 Android App 构建，通过深入参与 android-gradle-plugin 的构建环节，将更易读的「模块配置表」转换成各个模块的构建配置参数，来实现平台化构建。

PS：本插件基于 AGP 设计，主要作用为简化臃肿繁琐的模块化配置工作，提高客观理性。而平台化的重点在于「模块化解耦」。使用本插件并不能实现类似于「一键平台化」的功能！


## 三、Vulcan 插件使用说明

### 1. 接入说明

TODO

### 2. 配置说明

TODO
